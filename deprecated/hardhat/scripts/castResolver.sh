#! /bin/zsh

source .env

export MAINNET_ALCHEMY_RPC_URL=https://eth-mainnet.alchemyapi.io/v2/$ALCHEMY_API_KEY
export POLYGON_ALCHEMY_RPC_URL=https://polygon-mainnet.g.alchemy.com/v2/$ALCHEMY_API_KEY_POLYGON
export GOERLI_ALCHEMY_RPC_URL=https://eth-goerli.g.alchemy.com/v2/$ALCHEMY_API_KEY_GOERLI

export FOUNDRY_ETH_RPC_URL=$POLYGON_ALCHEMY_RPC_URL
echo $FOUNDRY_ETH_RPC_URL


export GOERLI_RESOLVER=0x19d86761822f79FF4428991B3c8C3c02759926E0
export POLYGON_RESOLVER=0x65939962b71c0787B6E65516d7A460B6689822F6

export CONTRACT=$POLYGON_RESOLVER

export POLYGON_OPEN_NFT=0xBf232A580C3306F7A7cA90D09ec241F6818D06FA
export GOERLI_OPEN_NFT=

export ERC1155_SILICON=0x875123bc716829Bb83a3eA2Db3AbD8BB8DCc3519


export ACCOUNT_AL1=0x981ab0D817710d8FFFC5693383C00D985A3BDa38
export ACCOUNT_AL2=0x6eebAe27d69fa80f0E4C0E973A2Fed218A56880c
export ACCOUNT_RND=0xb09Ae31E045Bb9d8D74BB6624FeEB18B3Af72A8e

export ETH_FROM=$ACCOUNT_AL2

# cast call 0xaEa649bA522C5a501d8A4881172E6AB50A27a4e8 0x01ffc9a701ffc9a700000000000000000000000000000000000000000000000000000000 
# cast call 0xaEa649bA522C5a501d8A4881172E6AB50A27a4e8 0x01ffc9a7ffffffff00000000000000000000000000000000000000000000000000000000 

# cast call $POLYGON_RESOLVER "getOpenNFTsCollectionInfos(address,address)"  0xaEa649bA522C5a501d8A4881172E6AB50A27a4e8 0x981ab0D817710d8FFFC5693383C00D985A3BDa38




# cast 4byte-decode  0xdceba604000000000000000000000000aea649ba522c5a501d8a4881172e6ab50a27a4e8000000000000000000000000981ab0d817710d8fffc5693383c00d985a3bda38

# cast call $CONTRACT "countAddresses()"   

# cast call $CONTRACT "isCollection(address)" $ERC1155_SILICON

# cast call $CONTRACT "getOpenNFTsCollectionsInfos(address)" $POLYGON_OPEN_NFT 

# cast call $CONTRACT "getOpenNFTsCollectionsInfos(address)" $ERC1155_SILICON 

# cast --abi-decode "getOpenNFTsCollectionsInfos(address)((address,address,string,string,uint256,uint256,bool[],uint8)[],(uint256,string,bool,uint256,address,uint96)[],uint256,uint256)" "0x000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000009200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"


# cast call $CONTRACT "isCollections(address[])"  "[$POLYGON_OPEN_NFT]"

# cast call $CONTRACT "isCollection(address)" $POLYGON_OPEN_NFT




# cast call $CONTRACT "getOpenNFTsCollectionsInfos(address)" $ACCOUNT_AL1

# cast call $CONTRACT "getOpenNFTsCollectionsInfos(address)" $ACCOUNT_RND


# cast 4byte 0xdb668ce0
# cast 4byte-decode "0xdb668ce00000000000000000000000006eebae27d69fa80f0e4c0e973a2fed218a56880c"

# cast 4byte 0xe47a60f6
# cast 4byte-decode "0xe47a60f60000000000000000000000008ea3f5d0f14a5adce77aaeeb33be462606d0df7e0000000000000000000000006eebae27d69fa80f0e4c0e973a2fed218a56880c000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000"

# CRASH
# cast call $CONTRACT "getOpenNFTsCollectionsInfos(address)"  $ACCOUNT_AL2
